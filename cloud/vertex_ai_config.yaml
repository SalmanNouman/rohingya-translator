workerPoolSpecs:
  - machine_spec:
      machine_type: n1-standard-8
      accelerator_type: NVIDIA_TESLA_T4
      accelerator_count: 1
    replica_count: 1
    container_spec:
      image_uri: gcr.io/airotech-442120/rohingya-translator:v3-t4-opt
      command: ["python", "-m", "src.train"]
      args: []
      env:
        - name: PYTORCH_CUDA_ALLOC_CONF
          value: "max_split_size_mb:128"
        - name: TORCH_CUDA_ARCH_LIST
          value: "7.5"  # T4 architecture
        - name: DATA_DIR
          value: "/app/data" # Assumes data is mounted or downloaded to here
        - name: OUTPUT_DIR
          value: "/app/models" # Local output dir before upload
        - name: GCS_BUCKET
          value: "rohingya-translator-vertex"
        - name: GCS_PROJECT
          value: "airotech-442120"
        - name: NUM_EPOCHS
          value: "10"
        - name: BATCH_SIZE
          value: "16"

scheduling:
  timeout: 86400  # 24 hours

serviceAccount: 596516478493-compute@developer.gserviceaccount.com
